<!-- Dark Mode Styles - Include in all pages -->
<script>
    // Apply dark mode IMMEDIATELY before page renders
    (function () {
        if (localStorage.getItem('darkMode') === 'true') {
            document.write('<style>body{background:#1a1a1a!important;color:#e0e0e0!important;}</style>');
        }
    })();
</script>

<style>
    /* Dark Mode Transitions */
    body {
        transition: background-color 0.3s, color 0.3s;
    }

    /* Dark Mode Global Styles */
    body.dark-mode {
        background: #1a1a1a;
        color: #e0e0e0;
    }

    /* Page Headers */
    body.dark-mode .page-header h1 {
        color: #e0e0e0;
    }

    body.dark-mode .page-header h1 .user-name {
        color: #8b9cf7;
        /* Lighter purple for dark mode */
    }

    body.dark-mode .page-header p {
        color: #b0b0b0;
    }

    /* Cards and Sections */
    body.dark-mode .stats-grid,
    body.dark-mode .stat-card,
    body.dark-mode .settings-section,
    body.dark-mode .calendar-container,
    body.dark-mode .task-card,
    body.dark-mode .chart-container {
        background: #2d2d2d;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    /* Monthly themes for dark mode - softer colors */
    body.dark-mode .calendar-container.month-1 {
        background: linear-gradient(135deg, #1a237e 0%, #283593 100%) !important;
        border-color: #3f51b5 !important;
    }

    body.dark-mode .calendar-container.month-2 {
        background: linear-gradient(135deg, #880e4f 0%, #ad1457 100%) !important;
        border-color: #e91e63 !important;
    }

    body.dark-mode .calendar-container.month-3 {
        background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 100%) !important;
        border-color: #4caf50 !important;
    }

    body.dark-mode .calendar-container.month-4 {
        background: linear-gradient(135deg, #004d40 0%, #00695c 100%) !important;
        border-color: #009688 !important;
    }

    body.dark-mode .calendar-container.month-5 {
        background: linear-gradient(135deg, #e65100 0%, #f57c00 100%) !important;
        border-color: #ff9800 !important;
    }

    body.dark-mode .calendar-container.month-6 {
        background: linear-gradient(135deg, #f57f17 0%, #fbc02d 100%) !important;
        border-color: #ffc107 !important;
    }

    body.dark-mode .calendar-container.month-7 {
        background: linear-gradient(135deg, #006064 0%, #0097a7 100%) !important;
        border-color: #00bcd4 !important;
    }

    body.dark-mode .calendar-container.month-8 {
        background: linear-gradient(135deg, #bf360c 0%, #ef6c00 100%) !important;
        border-color: #ff9800 !important;
    }

    body.dark-mode .calendar-container.month-9 {
        background: linear-gradient(135deg, #e65100 0%, #ff8f00 100%) !important;
        border-color: #ff9800 !important;
    }

    body.dark-mode .calendar-container.month-10 {
        background: linear-gradient(135deg, #bf360c 0%, #d84315 100%) !important;
        border-color: #ff5722 !important;
    }

    body.dark-mode .calendar-container.month-11 {
        background: linear-gradient(135deg, #3e2723 0%, #5d4037 100%) !important;
        border-color: #8d6e63 !important;
    }

    body.dark-mode .calendar-container.month-12 {
        background: linear-gradient(135deg, #b71c1c 0%, #c62828 100%) !important;
        border-color: #f44336 !important;
    }

    /* Dark mode month header colors */
    body.dark-mode .calendar-container .calendar-header h2 {
        color: #e0e0e0 !important;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
    }

    body.dark-mode .stat-card h3,
    body.dark-mode .settings-section h2,
    body.dark-mode .task-card h3 {
        color: #e0e0e0;
    }

    body.dark-mode .stat-card p {
        color: #b0b0b0;
    }

    /* Forms */
    body.dark-mode .profile-image-section {
        background: #3a3a3a;
    }

    body.dark-mode .form-group label {
        color: #b0b0b0;
    }

    body.dark-mode .form-group input,
    body.dark-mode .form-group select,
    body.dark-mode .form-group textarea {
        background: #3a3a3a;
        border-color: #4a4a4a;
        color: #e0e0e0;
    }

    body.dark-mode .form-group input:focus,
    body.dark-mode .form-group select:focus,
    body.dark-mode .form-group textarea:focus {
        border-color: #667eea;
    }

    /* Toggle Groups */
    body.dark-mode .toggle-group {
        border-bottom-color: #4a4a4a;
    }

    body.dark-mode .toggle-info h3 {
        color: #e0e0e0;
    }

    body.dark-mode .toggle-info p {
        color: #b0b0b0;
    }

    /* Calendar */
    body.dark-mode .calendar-day-header {
        background: #3a3a3a;
        color: #667eea;
    }

    body.dark-mode .calendar-day {
        background: #2d2d2d;
        border-color: #4a4a4a;
    }

    body.dark-mode .calendar-day:hover {
        border-color: #667eea;
    }

    body.dark-mode .calendar-day.today {
        background: #2a2a3a;
    }

    body.dark-mode .calendar-day.other-month {
        background: #252525;
    }

    body.dark-mode .day-number {
        color: #e0e0e0;
    }

    body.dark-mode .calendar-header h2 {
        color: #e0e0e0;
    }

    /* Tasks */
    body.dark-mode .task-item {
        background: #2d2d2d;
        border-color: #4a4a4a;
    }

    body.dark-mode .task-item:hover {
        border-color: #667eea;
    }

    body.dark-mode .task-title {
        color: #e0e0e0;
    }

    body.dark-mode .task-description {
        color: #b0b0b0;
    }

    body.dark-mode .task-meta {
        color: #999;
    }

    /* Filters */
    body.dark-mode .filters {
        background: #2d2d2d;
    }

    body.dark-mode .filter-group label {
        color: #b0b0b0;
    }

    body.dark-mode .filter-group select {
        background: #3a3a3a;
        border-color: #4a4a4a;
        color: #e0e0e0;
    }

    /* Modal */
    body.dark-mode .modal-content {
        background: #2d2d2d;
    }

    body.dark-mode .modal-content h2 {
        color: #e0e0e0;
    }

    /* Messages */
    body.dark-mode .message {
        background: #3a3a3a;
        color: #e0e0e0;
    }

    /* Charts */
    body.dark-mode .chart-container h3 {
        color: #e0e0e0;
    }

    /* Empty State */
    body.dark-mode .empty-state h3 {
        color: #e0e0e0;
    }

    body.dark-mode .empty-state p {
        color: #b0b0b0;
    }

    /* Coming Soon */
    body.dark-mode .coming-soon h2 {
        color: #e0e0e0;
    }

    body.dark-mode .coming-soon p {
        color: #b0b0b0;
    }

    /* Login/Register Container */
    body.dark-mode .container {
        background: #2d2d2d;
        color: #e0e0e0;
    }

    body.dark-mode h2 {
        color: #e0e0e0;
    }

    body.dark-mode label {
        color: #b0b0b0;
    }

    body.dark-mode input[type="text"],
    body.dark-mode input[type="email"],
    body.dark-mode input[type="password"] {
        background: #3a3a3a;
        border-color: #4a4a4a;
        color: #e0e0e0;
    }

    body.dark-mode input[type="text"]:focus,
    body.dark-mode input[type="email"]:focus,
    body.dark-mode input[type="password"]:focus {
        border-color: #667eea;
    }

    body.dark-mode .link {
        color: #b0b0b0;
    }

    body.dark-mode .link a {
        color: #8b9aee;
    }

    body.dark-mode .welcome {
        background: #3a3a3a;
    }

    body.dark-mode .welcome h3 {
        color: #e0e0e0;
    }

    body.dark-mode .welcome p {
        color: #b0b0b0;
    }
</style>

<script>
    // Apply dark mode class to body as soon as DOM is ready
    (function () {
        function applyDarkMode() {
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
            }
        }

        // Try to apply immediately if body exists
        if (document.body) {
            applyDarkMode();
        } else {
            // Otherwise wait for DOM
            document.addEventListener('DOMContentLoaded', applyDarkMode);
        }
    })();
</script>