<!-- Dark Mode Styles - Include in all pages -->
<script>
    // Apply dark mode IMMEDIATELY before page renders
    (function () {
        if (localStorage.getItem('darkMode') === 'true') {
            document.write('<style>body{background:#1a1a1a!important;color:#e0e0e0!important;}</style>');
        }
    })();
</script>

<style>
    /* Dark Mode Transitions */
    body {
        transition: background-color 0.3s, color 0.3s;
    }

    /* Dark Mode Global Styles */
    body.dark-mode {
        background: #1a1a1a;
        color: #e0e0e0;
    }

    /* Page Headers */
    body.dark-mode .page-header h1 {
        color: #e0e0e0;
    }

    body.dark-mode .page-header p {
        color: #b0b0b0;
    }

    /* Cards and Sections */
    body.dark-mode .stats-grid,
    body.dark-mode .stat-card,
    body.dark-mode .settings-section,
    body.dark-mode .calendar-container,
    body.dark-mode .task-card,
    body.dark-mode .chart-container {
        background: #2d2d2d;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    body.dark-mode .stat-card h3,
    body.dark-mode .settings-section h2,
    body.dark-mode .task-card h3 {
        color: #e0e0e0;
    }

    body.dark-mode .stat-card p {
        color: #b0b0b0;
    }

    /* Forms */
    body.dark-mode .profile-image-section {
        background: #3a3a3a;
    }

    body.dark-mode .form-group label {
        color: #b0b0b0;
    }

    body.dark-mode .form-group input,
    body.dark-mode .form-group select,
    body.dark-mode .form-group textarea {
        background: #3a3a3a;
        border-color: #4a4a4a;
        color: #e0e0e0;
    }

    body.dark-mode .form-group input:focus,
    body.dark-mode .form-group select:focus,
    body.dark-mode .form-group textarea:focus {
        border-color: #667eea;
    }

    /* Toggle Groups */
    body.dark-mode .toggle-group {
        border-bottom-color: #4a4a4a;
    }

    body.dark-mode .toggle-info h3 {
        color: #e0e0e0;
    }

    body.dark-mode .toggle-info p {
        color: #b0b0b0;
    }

    /* Calendar */
    body.dark-mode .calendar-day-header {
        background: #3a3a3a;
        color: #667eea;
    }

    body.dark-mode .calendar-day {
        background: #2d2d2d;
        border-color: #4a4a4a;
    }

    body.dark-mode .calendar-day:hover {
        border-color: #667eea;
    }

    body.dark-mode .calendar-day.today {
        background: #2a2a3a;
    }

    body.dark-mode .calendar-day.other-month {
        background: #252525;
    }

    body.dark-mode .day-number {
        color: #e0e0e0;
    }

    body.dark-mode .calendar-header h2 {
        color: #e0e0e0;
    }

    /* Tasks */
    body.dark-mode .task-item {
        background: #2d2d2d;
        border-color: #4a4a4a;
    }

    body.dark-mode .task-item:hover {
        border-color: #667eea;
    }

    body.dark-mode .task-title {
        color: #e0e0e0;
    }

    body.dark-mode .task-description {
        color: #b0b0b0;
    }

    body.dark-mode .task-meta {
        color: #999;
    }

    /* Filters */
    body.dark-mode .filters {
        background: #2d2d2d;
    }

    body.dark-mode .filter-group label {
        color: #b0b0b0;
    }

    body.dark-mode .filter-group select {
        background: #3a3a3a;
        border-color: #4a4a4a;
        color: #e0e0e0;
    }

    /* Modal */
    body.dark-mode .modal-content {
        background: #2d2d2d;
    }

    body.dark-mode .modal-content h2 {
        color: #e0e0e0;
    }

    /* Messages */
    body.dark-mode .message {
        background: #3a3a3a;
        color: #e0e0e0;
    }

    /* Charts */
    body.dark-mode .chart-container h3 {
        color: #e0e0e0;
    }

    /* Empty State */
    body.dark-mode .empty-state h3 {
        color: #e0e0e0;
    }

    body.dark-mode .empty-state p {
        color: #b0b0b0;
    }

    /* Coming Soon */
    body.dark-mode .coming-soon h2 {
        color: #e0e0e0;
    }

    body.dark-mode .coming-soon p {
        color: #b0b0b0;
    }

    /* Login/Register Container */
    body.dark-mode .container {
        background: #2d2d2d;
        color: #e0e0e0;
    }

    body.dark-mode h2 {
        color: #e0e0e0;
    }

    body.dark-mode label {
        color: #b0b0b0;
    }

    body.dark-mode input[type="text"],
    body.dark-mode input[type="email"],
    body.dark-mode input[type="password"] {
        background: #3a3a3a;
        border-color: #4a4a4a;
        color: #e0e0e0;
    }

    body.dark-mode input[type="text"]:focus,
    body.dark-mode input[type="email"]:focus,
    body.dark-mode input[type="password"]:focus {
        border-color: #667eea;
    }

    body.dark-mode .link {
        color: #b0b0b0;
    }

    body.dark-mode .link a {
        color: #8b9aee;
    }

    body.dark-mode .welcome {
        background: #3a3a3a;
    }

    body.dark-mode .welcome h3 {
        color: #e0e0e0;
    }

    body.dark-mode .welcome p {
        color: #b0b0b0;
    }
</style>

<script>
    // Apply dark mode class to body as soon as DOM is ready
    (function () {
        function applyDarkMode() {
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
            }
        }

        // Try to apply immediately if body exists
        if (document.body) {
            applyDarkMode();
        } else {
            // Otherwise wait for DOM
            document.addEventListener('DOMContentLoaded', applyDarkMode);
        }
    })();
</script>